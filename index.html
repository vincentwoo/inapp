<!doctype html>
<html>
<head>
<title>Displeased Avians</title>
<link rel="stylesheet" href="css/kd_components.css" type="text/css" media="screen" charset="utf-8">
<link rel="stylesheet" href="css/kd_components_google.css" type="text/css" media="screen" charset="utf-8">
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
  $('#button').click(function() {
    var state = $('input:radio[name=state]:checked').val();
    $('#right').css('left', '8%');
    $('#notlogged').hide();
    $('#newuser').hide();
    $('#cardchange').hide();
    $('#showinstruments_one').hide();
    $('#showinstruments_multi').hide();

    if (state == 'notlogged') $('#notlogged').show();
    else if (state == 'newuser') $('#newuser').show();
    
    $('#buyflow').fadeIn('fast', function() {
      if (state != 'logged_one' && state != 'logged_multi') {
        slideOut();
        $('#buybutton').addClass('disabled');
      } else {
        if (state == 'logged_one') {
          $('#showinstruments_one').show();
        } else {
          $('#showinstruments_multi').show();
        }
        $('#cardchange').show();
        $('#buybutton').removeClass('disabled');
      }
    });
  });

  $('#buybg').click(function() {
    $('#buyflow').fadeOut('fast');
  });

  $('#cardchange').click(slideToggle);

  $('.single_instrument').click(function() {
    $('.single_instrument').removeClass('selected');
    $(this).addClass('selected');
    if (($(this).attr("card_type") == "visa" ||
         $(this).attr("card_type") == "master" ||
         $(this).attr("card_type") == "discover" ||
         $(this).attr("card_type") == "amex") &&
        ($(this).attr("card_num").length == 4)) {
      $('#cardchange').html("<img src='images/cc_" + $(this).attr("card_type") + ".png'> ***-" + $(this).attr("card_num") + " &#187");
    }
  });
});

function slideToggle() {
  if ($('#right').css('left') == '8%') slideOut();
  else slideIn();
}

function slideIn() {
  $('#right').css('left', '8%');
}
function slideOut() {
  $('#right').css('left', '50%');
}
</script>
</head>

<body>
<div id="main">
  <div id="config">
    <input type="radio" name="state" value="logged_multi" checked> Logged in (n instruments)<br /> 
    <input type="radio" name="state" value="logged_one"> Logged in (1 instrument)<br /> 
    <input type="radio" name="state" value="notlogged"> Not Logged in <br />
    <input type="radio" name="state" value="newuser"> New user <br />
  </div>
  <div id="button"></div>
</div>
<div id="buyflow">
  <div id="buybg"></div>
  <div id="frame">
    <div id="left">
      <div id="butter"></div>
      <div id="iteminfo">
        <img id="itemimage" src="images/eagle.png" />
        <b>A Mighty Eagle</b>
        <p>
          A mighty eagle decimates your enemies with deadly precision - buy one today.
        </p>
        <div style="float: right">
          Sold by <b>Rovio</b>
          <img src="images/logo_rovio.png" style="vertical-align: middle; height: 35px; width: auto" />
        </div>
        <div style="clear:both"></div>
      </div>
      <div id="sellerinfo">
        <div id="cost">
            <span>subtotal <b>$1.99</b></span>
            <span>taxes <b>$0.13</b></span>
            <span id="total">total <b>$2.12</b></span>
        </div>

        <a class="kd-button" id="cardchange">
          <img src='images/cc_amex.png'> ***-1312 &#187;
        </a>

      </div>
      <a id="buybutton" class="kd-button kd-button-submit">Buy Now</a>
    </div>
    <div id="right">
      <div id="notlogged">
        <h3>Security Check Required</h3>
        <p>
          We need to log you into Google to ensure your security. We'll open a window to do that in 3... 2... 1...
        </p>
        <div class="kd-button kd-button-submit" style="float: right; margin: 10px">Log In</div>
      </div>
      <div id="newuser">
        <div id="addcard">
          <p>
            You need to add a card to your account.
          </p>
          <div class="kd-button addcardbutton"
              style="position: absolute; bottom: 0; right: 0; z-index: 5;">
            + Add a new card
          </div>
        </div>
        We'll launch a window to add a card to your account shortly, but feel free to hit the button above if it doesn't come up.
      </div>

      <div id="showinstruments_one">
        <div id="bigcard">
          <img src="images/mc_logo.png" />
          **** **** **** 0484
          <br />
          Vincent Woo
        </div>
        <div class="kd-button addcardbutton" style="float:right; margin: 10px">
          + Add a new card
        </div>
        <p style="clear:both">
          You currently can pay only with the one card you have in your account. To add a different one, hit the button.
        </p>
      </div>
      <div id="showinstruments_multi" style="display:block;">
        <ul class='instrument_list'>
            <li class='single_instrument' card_type='master' card_num='9998'>
                <div class='card_image'>
                    <img src='images/cc_master.png' />
                </div>
                <div class='card_details'>
                    MasterCard ***-9998
                </div>
                <div style='clear: both;'>
            </li>
            <li class='single_instrument' card_type='visa' card_num='3431'>
                <div class='card_image'>
                    <img src='images/cc_visa.png' />
                </div>
                <div class='card_details'>
                    Visa ***-3431
                </div>
                <div style='clear: both;'>
            </li>
            <li class='single_instrument selected' card_type='amex' card_num='1312'>
                <div class='card_image'>
                    <img src='images/cc_amex.png' />
                </div>
                <div class='card_details'>
                    American Express ***-1312
                </div>
                <div style='clear: both;'>
            </li>
            <li class='single_instrument' card_type='discover' card_num='9283'>
                <div class='card_image'>
                    <img src='images/cc_discover.png' />
                </div>
                <div class='card_details'>
                    Discover ***-9283
                </div>
                <div style='clear: both;'>
            </li>
            <li class='add_instrument'>
                <div class='card_image'>
                    <img src='images/cc_visa.png' />
                </div>
                <div class='card_details'>
                    Add New
                </div>
                <div style='clear: both;'>
            </li>
        </ul>
      </div>
    </div>
  </div>
</div>
</body>
</html>
